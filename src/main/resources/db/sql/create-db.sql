DROP TABLE Usuarios IF EXISTS CASCADE;
DROP TABLE Tareas IF EXISTS CASCADE;
DROP TABLE Estados IF EXISTS CASCADE;
DROP TABLE Roles IF EXISTS CASCADE;
DROP TABLE TiposTarea IF EXISTS CASCADE;

CREATE TABLE Roles (
  RolId INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  Descripcion 	VARCHAR(30),
);

CREATE TABLE TiposTarea (
  TipoTareaId INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  Descripcion 	VARCHAR(30),
);

CREATE TABLE Estados (
  EstadoId INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  Descripcion 	VARCHAR(30),
);

CREATE TABLE Usuarios (
  UsuarioId INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY NOT NULL,
  Nombre 	VARCHAR(30),
  Apellido 	VARCHAR(30),
  Email  	VARCHAR(50),
  Password	VARCHAR(20),
  RolId		INTEGER,
  Activo	BOOLEAN,
  FechaAlta	TIMESTAMP(2),
);
ALTER TABLE Usuarios ADD CONSTRAINT id_rol FOREIGN KEY (RolId) REFERENCES Roles(RolId);

CREATE TABLE Tareas (
  TareaId INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  Titulo	VARCHAR(30),
  Descripcion 	VARCHAR(200),
  EstadoId	INTEGER,
  TipoTarea	INTEGER,
  Editable	BOOLEAN,
  UsuarioAlta INTEGER,
  FechaAlta	TIMESTAMP(2),
);
ALTER TABLE Tareas ADD CONSTRAINT id_usuario_tarea FOREIGN KEY (EstadoId) REFERENCES Usuarios(UsuarioId);
ALTER TABLE Tareas ADD CONSTRAINT id_estado_tarea FOREIGN KEY (EstadoId) REFERENCES Estados(EstadoId);
ALTER TABLE Tareas ADD CONSTRAINT id_tipo_tarea FOREIGN KEY (TipoTarea) REFERENCES TiposTarea(TipoTareaId);